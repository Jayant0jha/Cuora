<body>
<div class="row">
    <div class="create-event col-md-4">
      <form [formGroup]="addEventFormGroup"  (ngSubmit)="createEvent()" class="example-form">
        <mat-form-field appearance="outline">
            <mat-label>Title</mat-label>
            <input matInput type="text" [(ngModel)]="eventObj.Title" formControlName="eventTitle">
            <mat-error *ngIf="checkError('eventTitle', 'required')">Event title is required</mat-error>
            <mat-error *ngIf="checkError('eventTitle', 'minlength')">Event title should be more than 5 characters</mat-error>
            <mat-error *ngIf="checkError('eventTitle', 'maxlength')">Event title should be less than 20 characters</mat-error>
          </mat-form-field>
          <br>
          
          <mat-form-field appearance="outline">
            <mat-label>Description</mat-label>
            <textarea matInput type="text" [(ngModel)]="eventObj.Desc" 
            style="overflow:hidden"
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="20"
            formControlName="eventDesc"></textarea>
            <mat-error *ngIf="checkError('eventDesc', 'required')">Event description is required</mat-error>
          </mat-form-field>
          <br>

          <mat-form-field appearance="outline">
            <mat-label>Venue</mat-label>
            <input matInput type="text" [(ngModel)]="eventObj.Venue" formControlName="eventVenue">
            <mat-error *ngIf="checkError('eventVenue', 'required')">Event venue is required</mat-error>
          </mat-form-field>
          <br>
          
          <mat-form-field appearance="outline">
            <mat-label>Choose a date</mat-label>
            <input matInput [matDatepicker]="picker" [(ngModel)]="eventObj.Date" formControlName="eventDate">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="checkError('eventDate', 'required')">Event date is required</mat-error>
          </mat-form-field>
          <br>

          <button [disabled]="!addEventFormGroup.valid" type="submit" style="background-color: slateblue; width: 120px;"  mat-raised-button color="primary">Create Event</button>
      </form>  
          
          
    </div>
    <div class="col-md-8">
      <div style="margin: 0 auto; text-align: center; margin-top: 20px;" *ngIf="eventsFromDb.length==0">
        <mat-icon>calendar_today</mat-icon>
        <p style="color: grey;">We have no events to show</p>
        <p style="color: grey;">CHECK BACK SOON!</p>
      </div>
      <mat-card *ngFor="let e of eventsFromDb">
        <mat-title style="color: indigo;">
          {{e.Title}}
          <div *ngIf="e.CreatedById==currUserId" style="float: right; color: black;" (click)="deleteEvent(e)">
            <button mat-icon-button style="outline: none; border: none;">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </mat-title>
        <mat-card-content>
          <div class="eventData"><i>Description: </i>{{e.Desc}}</div>
          <div class="eventData"><i>Venue: </i>{{e.Venue}}</div>
          <div class="eventData"><i>Date: </i>{{e.Date.toDate()}}</div>
          <div class="eventData" style="color: grey; font-size: 12px; float: left;"><i>Created By: </i>{{e.CreatedBy}}</div>
        </mat-card-content>
        <mat-card-actions align="end">
          <button style="outline: none; border: none; cursor: default; background-color: transparent; margin-right: 10px;" >Attending?</button>
          <button mat-icon-button style="color: green;">
              <mat-icon>done</mat-icon>
          </button>
          <button mat-icon-button style="color: red;">
            <mat-icon>clear</mat-icon>
          </button>
      </mat-card-actions>
      </mat-card>
    </div>
  </div>
</body>